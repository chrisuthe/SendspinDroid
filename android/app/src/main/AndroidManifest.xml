<?xml version="1.0" encoding="utf-8"?>
<!--
    AndroidManifest.xml - Application configuration and permissions
    Defines app components, permissions, and device compatibility
    Note: package attribute replaced by namespace in build.gradle.kts (AGP 7.0+)
-->
<manifest xmlns:android="http://schemas.android.com/apk/res/android">

    <!--
        PERMISSIONS:
        Permissions must be declared here and requested at runtime (for dangerous permissions).
        All permissions below are "normal" level and granted automatically at install time.
    -->

    <!-- INTERNET: Required for network communication with audio servers
         Permission level: Normal (auto-granted)
         Used by: WebSocket client, HTTP requests, audio streaming -->
    <uses-permission android:name="android.permission.INTERNET" />

    <!-- ACCESS_NETWORK_STATE: Query network connectivity status
         Permission level: Normal (auto-granted)
         Used by: Check if WiFi/cellular is available before attempting connection
         Allows: Detect network type, check if connected to internet -->
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <!-- ACCESS_WIFI_STATE: Query WiFi state and info
         Permission level: Normal (auto-granted)
         Used by: Get WiFi network details, check if connected to WiFi
         Note: Does not allow toggling WiFi on/off -->
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

    <!-- CHANGE_WIFI_MULTICAST_STATE: Enable multicast packet reception
         Permission level: Normal (auto-granted)
         CRITICAL FOR: mDNS/Zeroconf server discovery
         Used by: WifiManager.MulticastLock in MainActivity
         Note: Multicast is disabled by default to save battery
         Android filters multicast packets unless this lock is held -->
    <uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE" />

    <!--
        TODO for v2: Consider adding these permissions:
        - FOREGROUND_SERVICE: If implementing background playback
        - POST_NOTIFICATIONS (API 33+): If implementing playback notifications
        - WAKE_LOCK: If preventing screen sleep during playback
        - READ_EXTERNAL_STORAGE: If caching audio locally
    -->

    <application
        <!-- allowBackup: Enable automatic backup to Google Drive
             Default: true
             Security note: Sensitive data should be excluded via backup rules
             TODO: Add android:fullBackupContent="@xml/backup_rules" -->
        android:allowBackup="true"

        <!-- icon: Standard launcher icon (square, all densities)
             Generated by Android Studio, supports adaptive icons on API 26+ -->
        android:icon="@mipmap/ic_launcher"

        <!-- label: App name shown in launcher and settings
             Using string resource for localization support -->
        android:label="@string/app_name"

        <!-- roundIcon: Circular icon for devices that use round icons
             Introduced in API 25, used on some launchers -->
        android:roundIcon="@mipmap/ic_launcher_round"

        <!-- supportsRtl: Support right-to-left languages (Arabic, Hebrew, etc.)
             Enables automatic layout mirroring for RTL locales -->
        android:supportsRtl="true"

        <!-- theme: Default theme for all activities
             Uses Material Components theme with DayNight (automatic dark mode) -->
        android:theme="@style/Theme.SendSpinDroid">

        <!--
            TODO for v2: Add application-level configurations:
            - android:name=".MyApplication" (custom Application class)
            - android:usesCleartextTraffic="false" (enforce HTTPS, currently needed for local servers)
            - android:networkSecurityConfig (custom network security rules)
        -->

        <!-- MainActivity: Primary activity and app entry point -->
        <activity
            android:name=".MainActivity"

            <!-- exported: Allow external apps to launch this activity
                 Required for launcher activities (intent-filter with MAIN/LAUNCHER)
                 Security: Only export activities that should be accessible externally -->
            android:exported="true">

            <!-- intent-filter: Defines how this activity can be started
                 This combination makes MainActivity the app's launcher icon -->
            <intent-filter>
                <!-- MAIN: This is a main entry point (no data needed to launch) -->
                <action android:name="android.intent.action.MAIN" />

                <!-- LAUNCHER: Show this activity in the app launcher -->
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <!--
                TODO for v2: Consider activity-level configurations:
                - android:screenOrientation="portrait" (lock orientation)
                - android:configChanges (handle config changes manually)
                - android:launchMode (control task/back stack behavior)
                - android:windowSoftInputMode (keyboard behavior)
            -->
        </activity>

        <!--
            TODO for v2: Add additional components:
            - <service> for background playback (foreground service)
            - <receiver> for media button controls
            - <provider> if exposing content to other apps
        -->
    </application>

    <!--
        TODO for v2: Add feature declarations for Google Play filtering:
        <uses-feature android:name="android.hardware.wifi" android:required="true" />
        <uses-feature android:name="android.hardware.audio.output" android:required="true" />
        <uses-feature android:name="android.software.leanback" android:required="false" /> (for Android TV)
    -->

</manifest>
